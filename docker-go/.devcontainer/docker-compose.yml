services:
  workspace:
    container_name: ${PROJECT_NAME:-docker-go}-vscode
    hostname: ${PROJECT_NAME:-docker-go}
    build:
      context: ..
      dockerfile: .devcontainer/infra/docker/go/Dockerfile
      args:
        USER_NAME: ${USER_NAME-myzn}
        GROUP_NAME: ${GROUP_NAME-myzn}
        UID: ${UID-1000}
        GID: ${GID-1000}
        WORKDIR: ${WORKDIR-/home/myzn/workspace}
        TZ: ${TZ-Asia/Tokyo}
    working_dir: ${WORKDIR-/home/myzn/workspace}
    tty: true
    restart: unless-stopped
    env_file:
      - .env
    volumes:
      - type: bind
        source: ..
        target: ${WORKDIR-/home/myzn/workspace}
    ports:
      - target: 8080
        published: ${APP_PORT:-8080}
        protocol: tcp
        mode: host
    environment:
      - TZ=${TZ-Asia/Tokyo}
